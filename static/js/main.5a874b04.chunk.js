(this["webpackJsonpps5-rent-app"]=this["webpackJsonpps5-rent-app"]||[]).push([[0],{28:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=a(7),s=(a(33),a(1)),i=a(2),u=a(4),m=a(3);a(34);var p=function(e){return r.a.createElement("div",{className:"btn-container"},r.a.createElement("div",{className:"button",id:e.id,onClick:e.update},"Add"))};var d=function(){return r.a.createElement("div",{className:"console-img "})};var h=function(e){return r.a.createElement("div",{className:"title"},r.a.createElement("span",null,e.title))},v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"not-available"},r.a.createElement("div",{className:"ribbon"},r.a.createElement("span",null,"NOT AVAILABLE")))}}]),a}(r.a.Component);var f=function(e){var t=e.title,a=e.consoleId,n=e.update;return e.available<0?r.a.createElement("div",{className:"console-container"},r.a.createElement(v,null),r.a.createElement(d,null),r.a.createElement("div",{className:"console-description"},r.a.createElement(h,{title:t}),r.a.createElement(p,{id:a,update:n}))):r.a.createElement("div",{className:"console-container"},r.a.createElement(d,null),r.a.createElement("div",{className:"console-description"},r.a.createElement(h,{title:t}),r.a.createElement(p,{id:a,update:n})))},E=a(9);function g(e){return function(t){t({type:" CHECKOUT_ITEM",payload:e})}}var b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateConsoleAvailable=function(e){var t={consoleId:parseInt(e.target.id),available:-1};n.props.updateConsole(t)},n.writeCheckOutItem=function(){n.props.checkOutItem(n.state.updateConsole)},n.changePage=function(){n.props.history.push("/")},n.state={consoles:[],updateConsole:n.props.consoleUpdated},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchConsoles()}},{key:"componentDidUpdate",value:function(e,t){if(t.consoles!==this.state.consoles){var a=this.state.consoles;this.setState({consoles:a})}else if(t.updateConsole!==this.state.updateConsole){var n=this.state.updateConsole;this.setState({updateConsole:n}),this.writeCheckOutItem(),this.changePage()}}},{key:"render",value:function(){var e=this,t=this.state.consoles;return r.a.createElement("div",{className:"console-page "},t.map((function(t){return r.a.createElement(f,{available:t.available,key:t.consoleId,consoleId:t.consoleId,title:t.name,update:e.updateConsoleAvailable})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.consoles!==t.consoles?{consoles:e.consoles}:e.consoleUpdated._id!==t.updateConsole._id?(console.log("update state"),{updateConsole:e.consoleUpdated}):null}}]),a}(r.a.Component),O=Object(E.b)((function(e){return{consoles:e.consoles.consoles,consoleUpdated:e.consoles.consoleUpdated}}),{fetchConsoles:function(){return function(e){var t=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/console",{method:"GET",headers:{"auth-token":"".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_CONSOLE",payload:t})}))}},updateConsole:function(e){return function(t){var a=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/console",{method:"PATCH",body:JSON.stringify(e),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t({type:"UPDATE_CONSOLE",payload:e})}))}},checkOutItem:g})(b);var y=function(e){return r.a.createElement("div",{className:"add-button",id:e.id,onClick:e.update},"Add")};var j=function(e){return r.a.createElement("div",{className:"title"},r.a.createElement("span",null,e.title))};var C=function(e){return r.a.createElement("div",{className:"controller-description"},r.a.createElement(j,{title:e.title}),r.a.createElement("div",{className:"add-controller"},r.a.createElement(y,{id:e.controllerId,update:e.update})))};var k=function(){return r.a.createElement("div",{className:"controller-img"})};var I=function(e){return parseInt(e.available)<0?r.a.createElement("div",{className:"controller-container"},r.a.createElement(v,null),r.a.createElement(k,null),r.a.createElement(C,{title:e.title,controllerId:e.controllerId,update:e.update})):r.a.createElement("div",{className:"controller-container"},r.a.createElement(k,null),r.a.createElement(C,{title:e.title,controllerId:e.controllerId,update:e.update}))};var N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateControllerAvailable=function(e){var t={controllerId:parseInt(e.target.id),available:-n.state.count};n.props.updateController(t)},n.changePage=function(){n.props.history.push("/")},n.writeCheckOutItem=function(){n.props.checkOutItem(n.state.updateController)},n.state={count:1,controllers:[],updateController:n.props.controllerUpdated},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchControllers()}},{key:"componentDidUpdate",value:function(e,t){if(t.controllers!==this.state.controllers){var a=this.state.controllers;this.setState({controllers:a})}else if(t.updateController!==this.state.updateController){var n=this.state.updateController;this.setState({updateController:n}),this.writeCheckOutItem(),this.changePage()}}},{key:"render",value:function(){var e=this,t=this.state.controllers;return r.a.createElement("div",{className:"controller-page"},t.map((function(t){return r.a.createElement(I,{available:t.available,key:t.controllerId,controllerId:t.controllerId,title:t.name,update:e.updateControllerAvailable})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.controllers!==t.controllers?{controllers:e.controllers}:e.controllerUpdated!==t.updateController?(console.log("updated state"),{updateController:e.controllerUpdated}):null}}]),a}(r.a.Component),T=Object(E.b)((function(e){return{controllers:e.controllers.controllers,controllerUpdated:e.controllers.controllerUpdated}}),{fetchControllers:function(){return function(e){var t=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/controller",{method:"GET",headers:{"auth-token":"".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_CONTROLLER",payload:t})}))}},updateController:function(e){return function(t){var a=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/controller",{method:"PATCH",body:JSON.stringify(e),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t({type:"UPDATE_CONTROLLER",payload:e})}))}},checkOutItem:g})(N);var U=function(e){return r.a.createElement("div",{className:"game-title"},r.a.createElement("span",null,e.title))};var S=function(e){return r.a.createElement("div",{className:"add-game-btn",id:e.id,onClick:e.update},"Add")};var P=function(){return r.a.createElement("div",{className:"game-img"})};var w=function(e){return e.available<0?r.a.createElement("div",{className:"game-container"},r.a.createElement(v,null),r.a.createElement(U,{title:e.title}),r.a.createElement(P,null),r.a.createElement(S,{id:e.gameId,update:e.update})):r.a.createElement("div",{className:"game-container"},r.a.createElement(U,{title:e.title}),r.a.createElement(P,null),r.a.createElement(S,{id:e.gameId,update:e.update}))};var D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateGameAvailable=function(e){var t={gameId:parseInt(e.target.id),available:-1};n.props.updateGame(t)},n.changePage=function(){n.props.history.push("/")},n.writeCheckOutItem=function(){n.props.checkOutItem(n.state.updateGame)},n.state={games:[],updateGame:n.props.gameUpdated},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(t.games!==this.state.games){var a=this.state.games;this.setState({games:a})}else if(t.updateGame!==this.state.updateGame){var n=this.state.updateGame;this.setState({updateGame:n}),this.writeCheckOutItem(),this.changePage()}}},{key:"componentDidMount",value:function(){this.props.fetchGames()}},{key:"render",value:function(){var e=this,t=this.state.games;return r.a.createElement("div",{className:"games-page"},t.map((function(t){return r.a.createElement(w,{available:t.available,key:t.gameId,gameId:t.gameId,title:t.name,update:e.updateGameAvailable})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.games!==t.games?{games:e.games}:e.gameUpdated!==t.updateGame?{updateGame:e.gameUpdated}:null}}]),a}(r.a.Component),A=Object(E.b)((function(e){return{games:e.games.games,gameUpdated:e.games.gameUpdated}}),{fetchGames:function(){return function(e){var t=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/games",{method:"GET",headers:{"auth-token":"".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_GAME",payload:t})}))}},updateGame:function(e){return function(t){var a=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/games",{method:"PATCH",body:JSON.stringify(e),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t({type:"UPDATE_GAME",payload:e})}))}},checkOutItem:g})(D),_=new(function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"post",value:function(e,t,a){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()}))}},{key:"patch",value:function(e,t,a){return fetch(e,{method:"PATCH",body:JSON.stringify(t),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()}))}}]),e}()),G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).rent=function(){var e=n.state.items.filter((function(e){return e.consoleId})).map((function(e){return e.name})).pop(),t=n.state.items.filter((function(e){return e.controllerId})),a=n.state.items.filter((function(e){return e.gameId})),r=n.state.items.filter((function(e){return e.tvId})).map((function(e){return e.name})).pop();t.map((function(e){return{controllerId:e.controllerId,name:e.name}}));var o=new Date;o.setHours(o.getHours()+24*n.state.time),a.map((function(e){return{gameId:e.gameId,name:e.name}})),console.log(r),function(e,t){return _.patch("https://psrent.herokuapp.com/user",e,t)}({console:e,tv:r,controllers:t,games:a,time:o},localStorage.getItem("currentUser")).then((function(e){return console.log("done")})),n.props.changePage()},n.getInputValue=function(e){n.setState({time:parseFloat(e.target.value)})},n.getPrice=function(e){switch(e){case"PlayStation 5":return 2e3;case"PlayStation 5 Digital Edition":return 2500;case"DualSense":return 200;case"LG 55'' 4K HDR Smart OLED TV":return 2500;default:return 100}},n.calcTotalPrice=function(){for(var e=0,t=0;t<n.listDisplay().length;t++)e+=n.calculatePrice(n.listDisplay()[t]);return e},n.calculatePrice=function(e){var t=n.state.time,a=e.name,r=n.getPrice(a),o=n.getNumberOfGames(),c=n.getNumberOfControllers();return.5===t?o<=5&&100===r?0:o>5&&100===r?100*(o-5)*.5:c<=2&&200===r?0:c>2&&200===r?100*(c-3)*.5:parseInt(.5*r):1===t?o<=5&&100===r?0:o>5&&100===r?100*(o-5)*1:c<=2&&200===r?0:c>2&&200===r?100*(c-3)*1:1*r:2===t?o<=5&&100===r?0:o>5&&100===r?100*(o-5)*2:c<=2&&200===r?0:c>2&&200===r?100*(c-3)*2:2*r:3===t?o<=5&&100===r?0:o>5&&100===r?100*(o-5)*3*.75:c<=2&&200===r?0:c>2&&200===r?100*(c-3)*3*.75:3*r*.75:7===t?o<=5&&100===r?0:o>5&&100===r?100*(o-5)*6:c<=2&&200===r?0:c>2&&200===r?100*(c-3)*6:6*r:void 0},n.getNumberOfControllers=function(){return n.state.items.filter((function(e){return e.controllerId})).length},n.getNumberOfGames=function(){return n.state.items.filter((function(e){return e.gameId})).length},n.listDisplay=function(){var e=n.state.items.filter((function(e){return!e.gameId})),t=n.getNumberOfGames();if(t>0){var a={name:"Games x ".concat(t)};e.push(a)}return e},n.state={items:[],time:.5},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({items:this.props.data})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"checkout-calculator-container"},r.a.createElement("div",{className:"duration"},r.a.createElement("span",null,"Duration:"),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"duration",id:"",defaultChecked:!0,value:"0.5",onChange:this.getInputValue}),r.a.createElement("label",{htmlFor:""},"12h")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"duration",id:"",value:"1",onChange:this.getInputValue}),r.a.createElement("label",{htmlFor:""},"24h")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"duration",id:"",value:"2",onChange:this.getInputValue}),r.a.createElement("label",{htmlFor:""},"2d")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"duration",id:"",value:"3",onChange:this.getInputValue}),r.a.createElement("label",{htmlFor:""},"3d")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"duration",id:"",value:"7",onChange:this.getInputValue}),r.a.createElement("label",{htmlFor:""},"7d")))),r.a.createElement("div",{className:"final-price"},r.a.createElement("div",{className:"total"},r.a.createElement("span",null,"Total Price"),r.a.createElement("span",null,"".concat(this.calcTotalPrice()," rsd"))),r.a.createElement("ul",null,this.listDisplay().map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("span",{className:"name"},t.name),r.a.createElement("span",{className:"price"},e.calculatePrice(t)))})))),r.a.createElement("div",{className:"checkout-btn",onClick:this.rent},"Rent"))}}]),a}(r.a.Component),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"checked-console"},r.a.createElement("div",{className:"remove-btn",id:this.props.data._id,onClick:this.props.remove},"remove"),r.a.createElement("div",{className:"console-img"}))}}]),a}(r.a.Component),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return this.props.data.length>0?r.a.createElement("div",{className:"checkout-console-container"},r.a.createElement(M,{data:this.props.data[0],remove:this.props.remove})):r.a.createElement("div",{className:"checkout-console-container"},r.a.createElement("div",{className:"checkout-console"},r.a.createElement(l.b,{to:"console"},r.a.createElement("span",null,"+"))))}}]),a}(r.a.Component),H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"checked-controller"},r.a.createElement("div",{className:"remove-btn",id:this.props.data._id,onClick:this.props.remove},"remove"),r.a.createElement("div",{className:"controller-img"}))}}]),a}(r.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){for(var e=this,t=this.props.data,a=t.length;a<4;a++)t[a]={};return r.a.createElement("div",{className:"checkout-controller-container"},t.map((function(t,a){return t.controllerId?r.a.createElement(H,{data:t,key:a,remove:e.props.remove}):r.a.createElement("div",{className:"checkout-controller",key:a},r.a.createElement(l.b,{to:"controller"},r.a.createElement("span",null,"+")))})))}}]),a}(r.a.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"checked-game"},r.a.createElement("div",{className:"remove-btn",id:this.props.data._id,onClick:this.props.remove},"remove"),r.a.createElement("div",{className:"game-img"}))}}]),a}(r.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){for(var e=this,t=this.props.data,a=t.length;a<8;a++)t[a]={};return r.a.createElement("div",{className:"checkout-games-container"},t.map((function(t,a){return t.gameId?r.a.createElement(L,{data:t,key:a,remove:e.props.remove}):r.a.createElement("div",{className:"checkout-games",key:a},r.a.createElement(l.b,{to:"games"},r.a.createElement("span",null,"+")))})))}}]),a}(r.a.Component);var x=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).remove=function(e){var t=n.props.items,a=e.target.id;n.props.removeItem(t,a),n.isPicked(),n.props.removeCheckOutItem()},n.changePage=function(){n.props.history.push("/account")},n.state={console:[],controllers:[],games:[]},n}return Object(i.a)(a,[{key:"isPicked",value:function(){var e=this.props.items.filter((function(e){return e.consoleId})),t=this.props.items.filter((function(e){return e.controllerId})),a=this.props.items.filter((function(e){return e.gameId}));this.setState({console:e,controllers:t,games:a})}},{key:"componentDidMount",value:function(){var e=this.props.items;if(this.props.console.consoleId){var t=this.props.console;this.props.addItem(e,t),this.isPicked()}if(this.props.controller.controllerId){var a=this.props.controller;this.props.addItem(e,a),this.isPicked()}if(this.props.game.gameId){var n=this.props.game;this.props.addItem(e,n),this.isPicked()}if(this.props.tv.tvId){var r=this.props.tv;this.props.addItem(e,r),this.isPicked()}}},{key:"render",value:function(){var e=this.state,t=e.console,a=e.controllers,n=e.games;return r.a.createElement("div",{className:"main"},r.a.createElement(F,{data:t,remove:this.remove}),r.a.createElement(R,{data:a,remove:this.remove}),r.a.createElement(V,{data:n,remove:this.remove}),r.a.createElement(G,{data:this.props.items,changePage:this.changePage}))}}]),a}(r.a.Component),J=Object(E.b)((function(e){return{console:e.checkout.item,controller:e.checkout.item,game:e.checkout.item,tv:e.checkout.item,items:e.main.items}}),{addItem:function(e,t){return function(a){var n=e;n.push(t),a({type:"ADD_ITEM",payload:n})}},removeItem:function(e,t){return function(a){var n=e,r=n.findIndex((function(e){return e._id===t}));r>=0&&n.splice(r,1),a({type:"REMOVE_ITEM",payload:n})}},removeCheckOutItem:function(){return function(e){e({type:" REMOVE_CHECKOUT_ITEM",payload:{}})}}})(x);var K=function(e){return r.a.createElement("div",{className:"btn-container"},r.a.createElement("div",{className:"button",onClick:e.update,id:e.id},"Add"))};var B=function(){return r.a.createElement("div",{className:"tv-img "})};var W=function(e){return r.a.createElement("div",{className:"title"},r.a.createElement("span",null,e.title))};var q=function(e){return e.available<0?r.a.createElement("div",{className:"tv-container"},r.a.createElement(v,null),r.a.createElement(B,null),r.a.createElement("div",{className:"tv-description"},r.a.createElement(W,{title:e.title}),r.a.createElement(K,{update:e.update,id:e.tvId}))):r.a.createElement("div",{className:"tv-container"},r.a.createElement(B,null),r.a.createElement("div",{className:"tv-description"},r.a.createElement(W,{title:e.title}),r.a.createElement(K,{update:e.update,id:e.tvId})))};var $=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateTvAvailable=function(e){var t={tvId:parseInt(e.target.id),available:-1};n.props.updateTV(t)},n.changePage=function(){n.props.history.push("/")},n.writeCheckOutItem=function(){n.props.checkOutItem(n.state.updateTv)},n.state={tvs:[],updateTv:n.props.tvUpdated},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(t.tvs!==this.state.tvs){var a=this.state.tvs;this.setState({tvs:a})}else if(t.updateTv!==this.state.updateTv){var n=this.state.updateTv;this.setState({updateTv:n}),this.writeCheckOutItem(),this.changePage()}}},{key:"componentDidMount",value:function(){this.props.fetchTvs()}},{key:"render",value:function(){var e=this,t=this.state.tvs;return r.a.createElement("div",{className:"tv-page"},t.map((function(t){return r.a.createElement(q,{available:t.available,key:t.tvId,tvId:t.tvId,title:t.name,update:e.updateTvAvailable})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.tvs!==t.tvs?{tvs:e.tvs}:e.tvUpdated!==t.updateTv?{updateTv:e.tvUpdated}:null}}]),a}(r.a.Component),z=Object(E.b)((function(e){return{tvs:e.tvs.tvs,tvUpdated:e.tvs.tvUpdated}}),{fetchTvs:function(){return function(e){var t=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/tv",{method:"GET",headers:{"auth-token":"".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_TV",payload:t})}))}},updateTV:function(e){return function(t){var a=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/tv",{method:"PATCH",body:JSON.stringify(e),headers:{"auth-token":"".concat(a),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t({type:"UPDATE_TV",payload:e})}))}},checkOutItem:g})($);var Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).calcTimeLeft=function(e){var t=new Date(e).getTime()-(new Date).getTime();t<0&&(t=0);var a=Math.floor(t/864e5)+"d "+Math.floor(t%864e5/36e5)+"h "+Math.floor(t%36e5/6e4)+"m "+Math.floor(t%6e4/1e3)+"s ";document.querySelector(".time-left").innerHTML=a},n.setRentedItems=function(e){var t=[];if(e._id){var a=e.renting.items.console,n=e.renting.items.controllers,o=e.renting.items.games,c=e.renting.items.tv;return t.push(a),t.push(c),n.map((function(e){return t.push(e.name)})),o.map((function(e){return t.push(e.name)})),t.map((function(e,t){return r.a.createElement("li",{key:t},e)}))}},n.logOut=function(){localStorage.removeItem("currentUser"),n.props.history.push("/")},n.state={user:{},time:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"componentDidUpdate",value:function(e,t){if(t.user!==this.state.user){var a=this.state.user;this.setState({user:a}),this.calcTimeLeft(this.state.user.renting.time)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"account-page"},r.a.createElement("div",{className:"account-info"},r.a.createElement("h3",null,"Account Information"),r.a.createElement("div",null,r.a.createElement("span",null,"Name:"),r.a.createElement("span",null,e.name)),r.a.createElement("div",null,r.a.createElement("span",null,"Username:"),r.a.createElement("span",null,e.username)),r.a.createElement("div",null,r.a.createElement("span",null,"Password:"),r.a.createElement("span",null,"*****"),r.a.createElement("span",{className:"change-pass"},"Change Password")),r.a.createElement("div",{className:"logout",onClick:this.logOut},"Log Out")),r.a.createElement("div",{className:"account-bonus"},r.a.createElement("span",null,"Bonus"),r.a.createElement("div",{className:"bonus"}),r.a.createElement("div",{className:"bonus"}),r.a.createElement("div",{className:"bonus"}),r.a.createElement("div",{className:"bonus"}),r.a.createElement("div",{className:"bonus"}),r.a.createElement("div",{className:"bonus"})),r.a.createElement("div",{className:"rent-info"},r.a.createElement("div",{className:"current-rent"},r.a.createElement("h3",null,"Currently renting"),r.a.createElement("ul",null,this.setRentedItems(this.state.user))),r.a.createElement("div",{className:"rent-time"},r.a.createElement("div",{className:"counter"},r.a.createElement("span",{className:"time-left"})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.user!==t.user?{user:e.user}:null}}]),a}(r.a.Component),X=Object(E.b)((function(e){return{user:e.user.user}}),{fetchUser:function(){return function(e){var t=localStorage.getItem("currentUser");fetch("https://psrent.herokuapp.com/user",{method:"GET",headers:{"auth-token":"".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_FETCH_USER",payload:t})}))}}})(Q),Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getUsername=function(e){n.setState({username:e.target.value})},n.getPassword=function(e){n.setState({password:e.target.value})},n.getName=function(e){n.setState({name:e.target.value})},n.getEmail=function(e){n.setState({email:e.target.value})},n.registerUser=function(){(function(e){return _.post("https://psrent.herokuapp.com/user/register",e)})({username:n.state.username,password:n.state.password,email:n.state.email,name:n.state.name}).then((function(e){return console.log(e)})).then((function(e){return n.props.history.push("/sign-in")})).catch((function(e){return console.log(e)}))},n.state={username:"",password:"",name:"",email:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"register"},r.a.createElement("h3",null,"Register"),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:this.getName}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:this.getEmail}),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:this.getUsername}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:this.getPassword}),r.a.createElement("div",{className:"register-btn",onClick:this.registerUser},r.a.createElement("span",null,"Register")),r.a.createElement(l.b,{to:"/sign-in"},"Sign In here")))}}]),a}(r.a.Component),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getUsername=function(e){n.setState({username:e.target.value})},n.getPassword=function(e){n.setState({password:e.target.value})},n.loginUser=function(){(function(e){return _.post("https://psrent.herokuapp.com/user/login",e)})({username:n.state.username,password:n.state.password}).then((function(e){return localStorage.setItem("currentUser",e)})).then((function(e){return n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.state={username:"",password:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sign-in-container"},r.a.createElement("div",{className:"sign-in"},r.a.createElement("h3",null,"SIGN IN"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:this.getUsername}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:this.getPassword}),r.a.createElement("div",{className:"sign-in-btn",onClick:this.loginUser},r.a.createElement("span",null,"Sign In")),r.a.createElement(l.b,{to:"/register"},"Register here")))}}]),a}(r.a.Component),ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/console"},"Console")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/controller"},"Controller")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/"},"Main")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/games"},"Games")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/tv"},"Tv"))))}}]),a}(r.a.Component),te=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"copyright"},r.a.createElement("span",null,"CopyRight 2020")),r.a.createElement("div",{className:"account"},r.a.createElement(l.b,{to:"/account"},r.a.createElement("i",{className:"far fa-user fa-lg"}),r.a.createElement("span",null,"Account"))))}}]),a}(r.a.Component),ae=a(8),ne=a(19),re=function(){return!!localStorage.getItem("currentUser")},oe=function(e){var t=e.component,a=e.restricted,n=Object(ne.a)(e,["component","restricted"]);return r.a.createElement(ae.b,Object.assign({},n,{render:function(e){return re()&&a?r.a.createElement(ae.a,{to:"/dashboard"}):r.a.createElement(t,e)}}))},ce=function(e){var t=e.component,a=Object(ne.a)(e,["component"]);return r.a.createElement(ae.b,Object.assign({},a,{render:function(e){return re()?r.a.createElement(t,e):r.a.createElement(ae.a,{to:"/sign-in"})}}))},le=a(14),se=a(27),ie=a(5),ue={consoles:[],consoleUpdated:{}},me={controllers:[],controllerUpdated:{}},pe={games:[],gameUpdated:{}},de={tvs:[],tvUpdated:{}},he={user:{}},ve={items:[]},fe={item:{}},Ee=Object(le.c)({consoles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONSOLE":return Object(ie.a)(Object(ie.a)({},e),{},{consoles:t.payload});case"UPDATE_CONSOLE":return Object(ie.a)(Object(ie.a)({},e),{},{consoleUpdated:t.payload});default:return e}},controllers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CONTROLLER":return Object(ie.a)(Object(ie.a)({},e),{},{controllers:t.payload});case"UPDATE_CONTROLLER":return Object(ie.a)(Object(ie.a)({},e),{},{controllerUpdated:t.payload});default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GAME":return Object(ie.a)(Object(ie.a)({},e),{},{games:t.payload});case"UPDATE_GAME":return Object(ie.a)(Object(ie.a)({},e),{},{gameUpdated:t.payload});default:return e}},tvs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TV":return Object(ie.a)(Object(ie.a)({},e),{},{tvs:t.payload});case"UPDATE_TV":return Object(ie.a)(Object(ie.a)({},e),{},{tvUpdated:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FETCH_USER":return Object(ie.a)(Object(ie.a)({},e),{},{user:t.payload});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM":case"REMOVE_ITEM":return Object(ie.a)(Object(ie.a)({},e),{},{items:t.payload});default:return e}},checkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case" CHECKOUT_ITEM":case" REMOVE_CHECKOUT_ITEM":return Object(ie.a)(Object(ie.a)({},e),{},{item:t.payload});default:return e}}}),ge=[se.a],be=Object(le.e)(Ee,{},Object(le.d)(le.a.apply(void 0,ge))),Oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(E.a,{store:be},r.a.createElement("div",{className:"App"},r.a.createElement(ee,null),r.a.createElement(ae.d,null,r.a.createElement(ce,{component:J,path:"/",exact:!0}),r.a.createElement(ce,{component:X,path:"/account",exact:!0}),r.a.createElement(ce,{component:O,path:"/console",exact:!0}),r.a.createElement(ce,{component:T,path:"/controller",exact:!0}),r.a.createElement(ce,{component:A,path:"/games",exact:!0}),r.a.createElement(ce,{component:z,path:"/tv",exact:!0}),r.a.createElement(oe,{restricted:!0,component:Z,path:"/sign-in",exact:!0}),r.a.createElement(oe,{restricted:!0,component:Y,path:"/register",exact:!0})),r.a.createElement(te,null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(Oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.5a874b04.chunk.js.map